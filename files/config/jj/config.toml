"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

[user]
name = "Joshua Rubin"
email = "joshua@poolside.ai"

[ui]
editor = ["nvim", "--cmd", "let g:flatten_wait=1"]
default-command = "status"
diff-editor = ["nvim", "-c", "DiffEditor $left $right $output"]
pager = "delta"
conflict-marker-style = "git"
diff-formatter = ":git"

[signing]
behavior = "own"
backend = "gpg"
key = "71AA74EA6C4CA520"

[remotes.origin]
auto-track-bookmarks = "glob:*"

[aliases]
d = ["diff", "--ignore-all-space"]
di = ["diff", "--ignore-all-space"]
l = ["log"]
# `jj lb` shows commits between main and @ (working copy), including their
# descendants and parents for context
lb = ["log", "-r", "(main..@):: | (main..@)-"]
# `jj la` shows all commits in the repository
la = ["log", "-r", "all()"]
# `jj ds -r <rev>` shows the complete description of a revision (e.g., jj ds -r @)
ds = ["log", "--no-graph", "--template", "description"]
# `jj dsc` shows the complete description of the current revision (@)
dsc = ["log", "-r", "@", "--no-graph", "--template", "description"]

[merge-tools.diffconflicts]
program = "nvim"
merge-args = [
  "-c",
  "let g:jj_diffconflicts_marker_length=$marker_length",
  "-c",
  "JJDiffConflicts!",
  "$output",
  "$base",
  "$left",
  "$right",
]
merge-tool-edits-conflict-markers = true
